import GoogleMapReact from 'google-map-react';
import React, { useState } from 'react';

const Marker = ({ text }) => <div className="google-map__marker">{text}</div>;

const GoogleMap = () => {
  const [markers, addMarker] = useState([
    { text: 0, lat: 45.75798824684426, lng: 21.232756530679907 },
    { text: 1, lat: 45.763205749630814, lng: 21.23304603285654 },
    { text: 2, lat: 45.76066089088425, lng: 21.24102828688486 },
    { text: 3, lat: 45.75858000835635, lng: 21.24250886626108 },
    { text: 4, lat: 45.74896801877344, lng: 21.235878445576265 },
    { text: 5, lat: 45.750076027220025, lng: 21.21680257506235 },
    { text: 6, lat: 45.751932640714045, lng: 21.215901352833345 },
    { text: 7, lat: 45.754734262246274, lng: 21.219792856841583 },
    { text: 8, lat: 45.76099207727716, lng: 21.22258235421707 },
    { text: 9, lat: 45.80201019327565, lng: 21.257179391960936 },
    { text: 10, lat: 45.76488215903778, lng: 21.240058070377525 },
    { text: 11, lat: 45.76200804351259, lng: 21.245508319095787 },
    { text: 12, lat: 45.76353479822929, lng: 21.251951780897027 },
    { text: 13, lat: 45.766124431803114, lng: 21.250535574537164 },
    { text: 14, lat: 45.766513614897285, lng: 21.254762735944634 },
    { text: 15, lat: 45.77107882921645, lng: 21.25083598194683 },
    { text: 16, lat: 45.77178228803398, lng: 21.260062780958062 },
    { text: 17, lat: 45.76534605746916, lng: 21.26057776508892 },
    { text: 18, lat: 45.77268030767382, lng: 21.26972235236865 },
    { text: 19, lat: 45.77779420277373, lng: 21.275907583971346 },
    { text: 20, lat: 45.773471035182475, lng: 21.289990383616978 },
    { text: 21, lat: 45.77086677531414, lng: 21.27494855546146 },
    { text: 22, lat: 45.763846641644946, lng: 21.275570827952915 },
    { text: 23, lat: 45.763756826108924, lng: 21.268876034251743 },
    { text: 24, lat: 45.76965440596331, lng: 21.26821084641605 },
    { text: 25, lat: 45.76746908106855, lng: 21.260528999797398 },
    { text: 26, lat: 45.763906518588655, lng: 21.260765034190708 },
    { text: 27, lat: 45.76261277650688, lng: 21.26079540741992 },
    { text: 28, lat: 45.75991818793293, lng: 21.258885674601316 },
    { text: 29, lat: 45.75855587418265, lng: 21.263842396860838 },
    { text: 30, lat: 45.760711608086474, lng: 21.265344433909178 },
    { text: 31, lat: 45.75982836607255, lng: 21.27004366410327 },
    { text: 32, lat: 45.762852289193184, lng: 21.27098780167651 },
    { text: 33, lat: 45.75147843304455, lng: 21.29120277502972 },
    { text: 34, lat: 45.75420337285694, lng: 21.29446434119183 },
    { text: 35, lat: 45.7575569622895, lng: 21.27899335959393 },
    { text: 36, lat: 45.76073070951319, lng: 21.280044785527767 },
    { text: 37, lat: 45.76101514030839, lng: 21.285173169164242 },
    { text: 38, lat: 45.76442819675146, lng: 21.285323372869076 },
    { text: 39, lat: 45.76620456252301, lng: 21.281299992380465 },
    { text: 40, lat: 45.766039907556156, lng: 21.27563516694101 },
    { text: 41, lat: 45.748287260475166, lng: 21.294075041822847 },
    { text: 42, lat: 45.745166987887615, lng: 21.278190562383582 },
    { text: 43, lat: 45.75413584625022, lng: 21.271195361272742 },
    { text: 44, lat: 45.75659117553185, lng: 21.27353424753373 },
    { text: 45, lat: 45.75406538200812, lng: 21.240247052199315 },
    { text: 46, lat: 45.75473911201378, lng: 21.24589041996665 },
    { text: 47, lat: 45.753077229953576, lng: 21.24612645435996 },
    { text: 48, lat: 45.752972424921545, lng: 21.24340133000083 },
    { text: 49, lat: 45.74861535586076, lng: 21.24584750462241 },
    { text: 50, lat: 45.74528332220665, lng: 21.236092354326978 },
    { text: 51, lat: 45.744489682685774, lng: 21.225599552660718 },
    { text: 52, lat: 45.747993590981245, lng: 21.225492264300122 },
    { text: 53, lat: 45.75088133617435, lng: 21.25221537761592 },
    { text: 54, lat: 45.75240853297131, lng: 21.250842086600294 },
    { text: 55, lat: 45.75691623335673, lng: 21.255564517609134 },
    { text: 56, lat: 45.75172101864514, lng: 21.260456866852298 },
    { text: 57, lat: 45.751586266007614, lng: 21.263353652588382 },
    { text: 58, lat: 45.74454805757659, lng: 21.251285517872795 },
    { text: 59, lat: 45.7360718917, lng: 21.253731692494377 },
    { text: 60, lat: 45.730590152369174, lng: 21.25291630095385 },
    { text: 61, lat: 45.73253727986801, lng: 21.259310687245353 },
    { text: 62, lat: 45.729302015331896, lng: 21.269824946583732 },
    { text: 63, lat: 45.732147859798864, lng: 21.27136989897631 },
    { text: 64, lat: 45.733256202092804, lng: 21.280210459889396 },
    { text: 65, lat: 45.7444257748051, lng: 21.27064033812426 },
    { text: 66, lat: 45.74491430582305, lng: 21.264099644594072 },
    { text: 67, lat: 45.7453635337093, lng: 21.262855099611162 },
    { text: 68, lat: 45.749556152991275, lng: 21.26319842236507 },
    { text: 69, lat: 45.748088772063134, lng: 21.26886324780452 },
    { text: 70, lat: 45.73852524984557, lng: 21.238296640496092 },
    { text: 71, lat: 45.738135871530794, lng: 21.244519365410643 },
    { text: 72, lat: 45.731695759451, lng: 21.24087156115039 },
    { text: 73, lat: 45.73199531601623, lng: 21.230743539910154 },
    { text: 74, lat: 45.736428565328204, lng: 21.230915201287107 },
    { text: 75, lat: 45.732923931157956, lng: 21.219027650933104 },
    { text: 76, lat: 45.73861510599414, lng: 21.216002119164305 },
    { text: 77, lat: 45.74059676865808, lng: 21.22279026248631 },
    { text: 78, lat: 45.74462502777695, lng: 21.21431448199925 },
    { text: 79, lat: 45.739114176335, lng: 21.20978691318211 },
    { text: 80, lat: 45.732589867594164, lng: 21.208702377830587 },
    { text: 81, lat: 45.73835595693564, lng: 21.20389425220898 },
    { text: 82, lat: 45.73442950213713, lng: 21.20114767017773 },
    { text: 83, lat: 45.726565952558815, lng: 21.20084726276806 },
    { text: 84, lat: 45.725802005887836, lng: 21.20310031834057 },
    { text: 85, lat: 45.72852819906549, lng: 21.20563232365063 },
    { text: 86, lat: 45.726565952558815, lng: 21.208529109386713 },
    { text: 87, lat: 45.72611035050765, lng: 21.22141467913053 },
    { text: 88, lat: 45.732536129000636, lng: 21.221972578605627 },
    { text: 89, lat: 45.73166751064803, lng: 21.23755907491592 },
    { text: 90, lat: 45.72473232352767, lng: 21.23687242940811 },
    { text: 91, lat: 45.723204369586206, lng: 21.25436043218521 },
    { text: 92, lat: 45.71529471980541, lng: 21.272856407722845 },
    { text: 93, lat: 45.72558990786704, lng: 21.284094660182838 },
    { text: 94, lat: 45.71395514761791, lng: 21.212208805064755 },
    { text: 95, lat: 45.721875348660234, lng: 21.22046278146392 },
    { text: 96, lat: 45.71842972700013, lng: 21.242478353058157 },
    { text: 97, lat: 45.72424221780966, lng: 21.243079167877493 },
    { text: 98, lat: 45.72150885806199, lng: 21.19937509950073 },
    { text: 99, lat: 45.71542640337615, lng: 21.2031516497937 },
    { text: 100, lat: 45.71749391299068, lng: 21.209803528150633 },
    { text: 101, lat: 45.710871734753155, lng: 21.2139448670016 },
    { text: 102, lat: 45.70964307818836, lng: 21.205533459530898 },
    { text: 103, lat: 45.693410372149636, lng: 21.186205908790722 },
    { text: 104, lat: 45.695029067014964, lng: 21.177408263221874 },
    { text: 105, lat: 45.71301475171921, lng: 21.191871824769155 },
    { text: 106, lat: 45.718895287830904, lng: 21.17683230383653 },
    { text: 107, lat: 45.727930140555515, lng: 21.19040091388558 },
    { text: 108, lat: 45.73038662257114, lng: 21.18838389270638 },
    { text: 109, lat: 45.733412140962045, lng: 21.193061665228353 },
    { text: 110, lat: 45.73657795391118, lng: 21.188874635205977 },
    { text: 111, lat: 45.7401422612124, lng: 21.19578400562834 },
    { text: 112, lat: 45.73708715459838, lng: 21.19805851887297 },
    { text: 113, lat: 45.74217364292654, lng: 21.194104273958985 },
    { text: 114, lat: 45.735793903644094, lng: 21.176122744723145 },
    { text: 115, lat: 45.7317799852067, lng: 21.18097217862207 },
    { text: 116, lat: 45.72394602248661, lng: 21.167668421908203 },
    { text: 117, lat: 45.729022749832644, lng: 21.156888614269594 },
    { text: 118, lat: 45.72177264409936, lng: 21.13500178870807 },
    { text: 119, lat: 45.71044621604749, lng: 21.148048053356508 },
    { text: 120, lat: 45.72165279973602, lng: 21.164656291576723 },
    { text: 121, lat: 45.73904056817172, lng: 21.18588876919082 },
    { text: 122, lat: 45.74838474689923, lng: 21.185845853846583 },
    { text: 123, lat: 45.749988381930045, lng: 21.193924936680038 },
    { text: 124, lat: 45.7432800918693, lng: 21.197443994907577 },
    { text: 125, lat: 45.75087065714732, lng: 21.18983065909699 },
    { text: 126, lat: 45.753685458527436, lng: 21.2095717174466 },
    { text: 127, lat: 45.75501853545536, lng: 21.19179020063822 },
    { text: 128, lat: 45.758162485527414, lng: 21.198613740372107 },
    { text: 129, lat: 45.75840201731845, lng: 21.208183862137243 },
    { text: 130, lat: 45.756575561440194, lng: 21.220259817856995 },
    { text: 131, lat: 45.76328361762157, lng: 21.21050438132161 },
    { text: 132, lat: 45.76567866941362, lng: 21.213594286106765 },
    { text: 133, lat: 45.76888189044968, lng: 21.220074503086746 },
    { text: 134, lat: 45.76247352260637, lng: 21.22633509755591 },
    { text: 135, lat: 45.76465904320664, lng: 21.205177832846438 },
    { text: 136, lat: 45.75855134630177, lng: 21.203117896323 },
    { text: 137, lat: 45.75783274976695, lng: 21.19659476399878 },
    { text: 138, lat: 45.76675466747967, lng: 21.19565062642554 },
    { text: 139, lat: 45.76334175336917, lng: 21.17844157338599 },
    { text: 140, lat: 45.74884268321103, lng: 21.178388871584065 },
    { text: 141, lat: 45.774164536534215, lng: 21.199209761964067 },
    { text: 142, lat: 45.77135076821927, lng: 21.208479476319535 },
    { text: 143, lat: 45.76745915258208, lng: 21.207020354615434 },
    { text: 144, lat: 45.76995983322479, lng: 21.211694436049292 },
    { text: 145, lat: 45.77274373800824, lng: 21.216543869948218 },
    { text: 146, lat: 45.7783258138444, lng: 21.210505856404026 },
    { text: 147, lat: 45.78231254022188, lng: 21.20521017277857 },
    { text: 148, lat: 45.786612511509034, lng: 21.217962413736213 },
    { text: 149, lat: 45.76515124740488, lng: 21.225601345010627 },
    { text: 150, lat: 45.76843094534534, lng: 21.22606656396263 },
    { text: 151, lat: 45.76798190312289, lng: 21.229928944944074 },
    { text: 152, lat: 45.76989779141338, lng: 21.230486844419172 },
    { text: 153, lat: 45.766185698083824, lng: 21.243103955625227 },
    { text: 154, lat: 45.778398751772066, lng: 21.252073262571027 },
    { text: 155, lat: 45.784205000895426, lng: 21.236151669858625 },
    { text: 156, lat: 45.79042958599704, lng: 21.227303865198778 },
    { text: 157, lat: 45.78183378947692, lng: 21.258263288427955 },
    { text: 158, lat: 45.78416818963225, lng: 21.26989334671653 },
    { text: 159, lat: 45.780965846543914, lng: 21.27809017746604 },
    { text: 160, lat: 45.76133404269074, lng: 21.253609008575634 },
  ]);
  const [selectedMarker, setSelectedMarker] = useState([45.77383169916346, 21.261635985229844]);

  const zone = [
    { id: 1, coo: [0, 2, 3, 45, 4, 52, 5, 6, 7, 130, 8, 134, 1] },
    { id: 9, coo: [1, 0, 11, 10] },
    { id: 10, coo: [10, 15, 14, 13, 12, 11] },
    { id: 11, coo: [15, 16, 17, 12] },
    { id: 31, coo: [16, 18, 19, 20, 21, 22, 23, 24, 25] },
    { id: 32, coo: [25, 24, 23, 26] },
    { id: 12, coo: [2, 3, 160, 12] },
    { id: 13, coo: [12, 160, 28, 27, 17] },
    { id: 33, coo: [28, 29, 30, 31, 32, 23, 26] },
    { id: 34, coo: [29, 30, 31, 32, 23, 22, 40, 39, 38, 37, 36, 35, 34, 33] },
    { id: 14, coo: [45, 46, 47, 48, 49, 53, 54, 55, 28, 160, 3] },
    { id: 35, coo: [28, 29, 57, 56, 55] },
    { id: 36, coo: [55, 56, 57, 67, 53, 54] },
    { id: 37, coo: [29, 44, 43, 42, 41, 64, 65, 66, 69, 68] },
    { id: 38, coo: [66, 67, 68, 69] },
    { id: 39, coo: [34, 41, 42, 43, 44, 33] },
    { id: 15, coo: [45, 46, 47, 48, 49, 50, 51, 52, 4] },
    { id: 16, coo: [50, 49, 58, 59, 70] },
    { id: 40, coo: [53, 49, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67] },
    { id: 41, coo: [91, 60, 61, 62, 63, 64, 93, 92] },
    { id: 42, coo: [59, 60, 72, 71] },
    { id: 44, coo: [70, 71, 72, 73, 74] },
    { id: 43, coo: [89, 60, 91, 97, 90] },
    { id: 49, coo: [89, 90, 87, 88] },
    { id: 17, coo: [5, 52, 51, 50, 70, 74, 73, 75, 76, 77, 78] },
    { id: 18, coo: [75, 76, 77, 78, 79, 80] },
    { id: 19, coo: [79, 81, 82, 83, 84, 85, 86, 87, 88, 80] },
    { id: 45, coo: [84, 85, 86, 87, 90, 97, 96, 95, 94] },
    { id: 46, coo: [98, 99, 100, 84] },
    { id: 47, coo: [98, 99, 100, 94, 101, 102, 103, 104, 105, 106, 107, 108, 109] },
    { id: 20, coo: [98, 84, 83, 82, 81, 112, 111, 110, 109] },
    { id: 21, coo: [106, 107, 108, 109, 110, 111, 113, 121, 114, 115, 116, 120] },
    { id: 22, coo: [114, 115, 116, 117] },
    { id: 48, coo: [116, 117, 118, 119, 120] },
    { id: 2, coo: [6, 5, 78, 79, 81, 112, 111, 113, 124, 123] },
    { id: 23, coo: [121, 122, 123, 124, 113] },
    { id: 3, coo: [123, 125, 126, 6] },
    { id: 5, coo: [6, 126, 125, 127, 137, 128, 136, 129, 130, 7] },
    { id: 4, coo: [130, 129, 131, 132, 133, 134, 8] },
    { id: 6, coo: [129, 136, 135, 131] },
    { id: 7, coo: [142, 143, 132, 133, 145, 144] },
    { id: 25, coo: [136, 137, 138, 141, 142, 143, 132, 131, 135] },
    { id: 24, coo: [140, 122, 125, 127, 137, 138, 139] },
    { id: 26, coo: [141, 142, 144, 145, 146] },
    { id: 27, coo: [147, 146, 145, 133, 134, 149, 150, 148] },
    { id: 8, coo: [134, 148, 150, 151, 152, 153, 10, 1] },
    { id: 28, coo: [148, 150, 151, 152, 155, 156] },
    { id: 29, coo: [152, 155, 154, 15, 153] },
    { id: 30, coo: [15, 154, 157, 158, 159, 19, 18, 16] },
  ];

  function isPoinInside(point, vs) {
    var x = point[0],
      y = point[1];

    var inside = false;
    for (var i = 0, j = vs.length - 1; i < vs.length; j = i++) {
      var xi = vs[i][0],
        yi = vs[i][1];
      var xj = vs[j][0],
        yj = vs[j][1];

      var intersect = yi > y != yj > y && x < ((xj - xi) * (y - yi)) / (yj - yi) + xi;
      if (intersect) inside = !inside;
    }

    return inside;
  }

  console.log(
    zone.find((zon) =>
      isPoinInside(
        selectedMarker,
        zon.coo.map((no) => {
          const co = markers.find((m) => m.text === no);
          return [co.lat, co.lng];
        })
      )
    )
  );
  return (
    <div style={{ height: '100vh', width: '100%' }}>
      <GoogleMapReact
        bootstrapURLKeys={{ key: 'AIzaSyDRvC6Q5uvEzTFo_CB0RiegSYQ-PxNNUEc' }}
        defaultCenter={{
          lat: 45.75597730618024,
          lng: 21.22962774095996,
        }}
        defaultZoom={13}
        yesIWantToUseGoogleMapApiInternals
        onClick={(value) => {
          console.log(value);
          setSelectedMarker([value.lat, value.lng]);
        }}
        on
      >
        {markers.map((marker) => (
          <Marker key={marker.text} {...marker} />
        ))}
      </GoogleMapReact>
    </div>
  );
};
export default GoogleMap;
